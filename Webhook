getgenv().key = {23165,60422,19160,81028,55939,42326} 
loadstring(game:HttpGet('https://raw.githubusercontent.com/Xenon-Trash/Loader/main/Loader.lua'))()

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local RunService = game:GetService("RunService")
local GuiService = game:GetService("GuiService")

local player = Players.LocalPlayer
local placeId = game.PlaceId

-- ฟังก์ชันสำหรับ rejoin
local function rejoin()
    print("Attempting to rejoin...")
    TeleportService:Teleport(placeId, player)
end

-- ตรวจสอบเมื่อแสดง Error Message (บางครั้งเน็ตหลุด)
GuiService.ErrorMessageChanged:Connect(function(msg)
    print("Error Message Changed: ", msg)
    if msg and msg ~= "" then
        wait(2)
        rejoin()
    end
end)

-- ตรวจสอบเมื่อ Player ถูกเตะออก
player.OnTeleport:Connect(function(state)
    if state == Enum.TeleportState.Failed then
        print("Teleport Failed, trying to rejoin...")
        wait(2)
        rejoin()
    end
end)

-- ในกรณีที่เน็ตช้าหรือ connection lost
RunService.RenderStepped:Connect(function()
    if not player:IsDescendantOf(Players) then
        wait(2)
        rejoin()
    end
end)

